<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Football Dice Game</title>
  <style>
    /* Global reset and layout */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background: #1a472a;
      color: #fff;
      padding: 16px;
      line-height: 1.5;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 24px;
    }

    /* Score display */
    .scoreboard {
      background: #0d2818;
      border: 2px solid #2d5a3d;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-around;
      text-align: center;
    }

    .score-item {
      flex: 1;
    }

    .score-label {
      font-size: 14px;
      opacity: 0.8;
      margin-bottom: 4px;
    }

    .score-value {
      font-size: 32px;
      font-weight: bold;
    }

    /* Game situation board */
    .situation-board {
      background: #0d2818;
      border: 2px solid #2d5a3d;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
    }

    .situation-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 12px;
    }

    .situation-item {
      background: #1a472a;
      border: 1px solid #2d5a3d;
      border-radius: 6px;
      padding: 10px;
      text-align: center;
    }

    .situation-label {
      font-size: 12px;
      opacity: 0.7;
      margin-bottom: 4px;
    }

    .situation-value {
      font-size: 20px;
      font-weight: bold;
      color: #4ade80;
    }

    .situation-value.critical {
      color: #fbbf24;
    }

    .possession-info {
      text-align: center;
      padding: 10px;
      background: #1a472a;
      border-radius: 6px;
      font-size: 14px;
    }

    /* Visual field */
    .visual-field {
      background: #0d2818;
      border: 2px solid #2d5a3d;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
    }

    .field-header {
      text-align: center;
      font-size: 14px;
      opacity: 0.8;
      margin-bottom: 12px;
    }

    .field-track {
      background: #1a472a;
      height: 60px;
      border-radius: 8px;
      position: relative;
      border: 2px solid #2d5a3d;
      overflow: hidden;
    }

    .field-markers {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
    }

    .field-marker {
      flex: 1;
      border-right: 1px solid #2d5a3d;
      position: relative;
    }

    .field-marker:last-child {
      border-right: none;
    }

    .marker-label {
      position: absolute;
      bottom: 4px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 10px;
      opacity: 0.6;
    }

    .ball-marker {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 32px;
      height: 32px;
      background: #fbbf24;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: left 0.5s ease;
      border: 2px solid #92400e;
      z-index: 10;
    }

    .first-down-marker {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 3px;
      background: #fbbf24;
      z-index: 5;
      transition: left 0.5s ease;
    }

    .first-down-marker::before {
      content: '1st';
      position: absolute;
      top: 2px;
      left: 5px;
      font-size: 10px;
      color: #fbbf24;
      font-weight: bold;
    }

    .endzone {
      position: absolute;
      right: 0;
      top: 0;
      bottom: 0;
      width: 30px;
      background: repeating-linear-gradient(
        45deg,
        #4ade80,
        #4ade80 5px,
        #22c55e 5px,
        #22c55e 10px
      );
      opacity: 0.3;
    }

    /* Card selection sections */
    .card-section {
      margin-bottom: 20px;
    }

    .section-header {
      background: #0d2818;
      border: 2px solid #2d5a3d;
      border-radius: 8px 8px 0 0;
      padding: 12px;
      text-align: center;
      font-weight: bold;
      font-size: 16px;
    }

    .section-header.offense {
      background: #1e3a8a;
      border-color: #3b82f6;
    }

    .section-header.defense {
      background: #7f1d1d;
      border-color: #dc2626;
    }

    .section-header.inactive {
      opacity: 0.5;
    }

    .cards-container {
      background: #0d2818;
      border: 2px solid #2d5a3d;
      border-top: none;
      border-radius: 0 0 8px 8px;
      padding: 12px;
    }

    .cards {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .card {
      background: #1a472a;
      border: 3px solid #2d5a3d;
      border-radius: 8px;
      padding: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .card:active {
      transform: scale(0.95);
    }

    .card.selected {
      border-color: #4ade80;
      background: #22543d;
      box-shadow: 0 0 12px rgba(74, 222, 128, 0.4);
    }

    .card.disabled {
      opacity: 0.3;
      cursor: not-allowed;
      pointer-events: none;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .card-name {
      font-size: 15px;
      font-weight: bold;
    }

    .card-icon {
      font-size: 20px;
    }

    .card-stats {
      font-size: 12px;
      opacity: 0.8;
      margin-bottom: 6px;
    }

    .card-desc {
      font-size: 11px;
      opacity: 0.7;
      font-style: italic;
    }

    /* Play button */
    .play-button {
      width: 100%;
      padding: 18px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.1s;
      background: #4ade80;
      color: #0d2818;
      margin-bottom: 12px;
    }

    .play-button:active {
      transform: scale(0.95);
    }

    .play-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: #2d5a3d;
      color: #fff;
    }

    .reset-btn {
      background: #ef4444;
      color: white;
      width: 100%;
      padding: 14px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    /* Play log */
    .log-container {
      background: #0d2818;
      border: 2px solid #2d5a3d;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      max-height: 300px;
      overflow-y: auto;
    }

    .log-title {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 12px;
      opacity: 0.9;
    }

    .log-entry {
      background: #1a472a;
      border-left: 3px solid #4ade80;
      padding: 8px 12px;
      margin-bottom: 8px;
      border-radius: 4px;
      font-size: 14px;
    }

    .log-entry.touchdown {
      border-left-color: #fbbf24;
      background: #2d1f0a;
    }

    .log-entry.drive-end {
      border-left-color: #ef4444;
      background: #2d0a0a;
    }

    .log-entry.first-down {
      border-left-color: #3b82f6;
      background: #1e3a8a;
    }

    /* Game over message */
    .game-over {
      background: #1e3a8a;
      border: 2px solid #3b82f6;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      text-align: center;
    }

    .game-over h2 {
      font-size: 28px;
      margin-bottom: 8px;
      color: #fbbf24;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>‚ö° Football Dice Game ‚ö°</h1>

    <!-- Scoreboard -->
    <div class="scoreboard">
      <div class="score-item">
        <div class="score-label">Player 1</div>
        <div class="score-value" id="score1">0</div>
      </div>
      <div class="score-item">
        <div class="score-label">Player 2</div>
        <div class="score-value" id="score2">0</div>
      </div>
    </div>

    <!-- Game Situation Board -->
    <div class="situation-board">
      <div class="situation-grid">
        <div class="situation-item">
          <div class="situation-label">Down</div>
          <div class="situation-value" id="downDisplay">1st</div>
        </div>
        <div class="situation-item">
          <div class="situation-label">Yards to 1st</div>
          <div class="situation-value" id="yardsToFirst">10</div>
        </div>
        <div class="situation-item">
          <div class="situation-label">Field Position</div>
          <div class="situation-value" id="fieldPosition">0</div>
        </div>
        <div class="situation-item">
          <div class="situation-label">Yards to TD</div>
          <div class="situation-value critical" id="yardsToTD">40</div>
        </div>
      </div>
      <div class="possession-info" id="possessionInfo">
        Player 1 has possession
      </div>
    </div>

    <!-- Game Over Message (hidden initially) -->
    <div id="gameOver" class="game-over" style="display: none;">
      <h2 id="winnerText"></h2>
      <p>Press Reset Game to play again</p>
    </div>

    <!-- Visual Field -->
    <div class="visual-field">
      <div class="field-header">Field Visualization</div>
      <div class="field-track">
        <div class="field-markers">
          <div class="field-marker"><span class="marker-label">0</span></div>
          <div class="field-marker"><span class="marker-label">10</span></div>
          <div class="field-marker"><span class="marker-label">20</span></div>
          <div class="field-marker"><span class="marker-label">30</span></div>
          <div class="field-marker"><span class="marker-label">40</span></div>
        </div>
        <div class="endzone"></div>
        <div class="first-down-marker" id="firstDownMarker"></div>
        <div class="ball-marker" id="ballMarker">üèà</div>
      </div>
    </div>

    <!-- Offense Card Selection -->
    <div class="card-section">
      <div class="section-header offense" id="offenseHeader">
        üèà OFFENSE - Player 1
      </div>
      <div class="cards-container">
        <div class="cards">
          <div class="card" onclick="selectOffenseCard('run', 'power')" id="card-run-power">
            <div class="card-header">
              <span class="card-name">Power Run</span>
              <span class="card-icon">üí™</span>
            </div>
            <div class="card-stats">Modifier: +2 | Need: 5+</div>
            <div class="card-desc">Safe but modest gain</div>
          </div>

          <div class="card" onclick="selectOffenseCard('run', 'sweep')" id="card-run-sweep">
            <div class="card-header">
              <span class="card-name">Sweep</span>
              <span class="card-icon">‚ö°</span>
            </div>
            <div class="card-stats">Modifier: +4 | Need: 7+</div>
            <div class="card-desc">Risky but explosive</div>
          </div>

          <div class="card" onclick="selectOffenseCard('pass', 'short')" id="card-pass-short">
            <div class="card-header">
              <span class="card-name">Short Pass</span>
              <span class="card-icon">üéØ</span>
            </div>
            <div class="card-stats">Modifier: +3 | Need: 6+</div>
            <div class="card-desc">Balanced approach</div>
          </div>

          <div class="card" onclick="selectOffenseCard('pass', 'deep')" id="card-pass-deep">
            <div class="card-header">
              <span class="card-name">Deep Pass</span>
              <span class="card-icon">üöÄ</span>
            </div>
            <div class="card-stats">Modifier: +6 | Need: 9+</div>
            <div class="card-desc">Home run ball!</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Defense Card Selection -->
    <div class="card-section">
      <div class="section-header defense" id="defenseHeader">
        üõ°Ô∏è DEFENSE - Player 2
      </div>
      <div class="cards-container">
        <div class="cards">
          <div class="card" onclick="selectDefenseCard('contain')" id="card-def-contain">
            <div class="card-header">
              <span class="card-name">Contain</span>
              <span class="card-icon">üß±</span>
            </div>
            <div class="card-stats">Defense: +3</div>
            <div class="card-desc">Solid wall, stops runs</div>
          </div>

          <div class="card" onclick="selectDefenseCard('blitz')" id="card-def-blitz">
            <div class="card-header">
              <span class="card-name">Blitz</span>
              <span class="card-icon">‚öîÔ∏è</span>
            </div>
            <div class="card-stats">Defense: +5</div>
            <div class="card-desc">All-out pressure!</div>
          </div>

          <div class="card" onclick="selectDefenseCard('coverage')" id="card-def-coverage">
            <div class="card-header">
              <span class="card-name">Coverage</span>
              <span class="card-icon">üë•</span>
            </div>
            <div class="card-stats">Defense: +4</div>
            <div class="card-desc">Locks down passes</div>
          </div>

          <div class="card" onclick="selectDefenseCard('prevent')" id="card-def-prevent">
            <div class="card-header">
              <span class="card-name">Prevent</span>
              <span class="card-icon">üö´</span>
            </div>
            <div class="card-stats">Defense: +2</div>
            <div class="card-desc">Bend don't break</div>
          </div>
        </div>
      </div>
    </div>

    <button class="play-button" id="playBtn" onclick="executePlay()" disabled>
      Both Players Must Select Cards
    </button>

    <button class="reset-btn" onclick="resetGame()">üîÑ Reset Game</button>

    <!-- Play Log -->
    <div class="log-container">
      <div class="log-title">üìã Play-by-Play Log</div>
      <div id="playLog"></div>
    </div>
  </div>

  <script>
    // ========================================
    // Game State
    // ========================================
    
    // Play card definitions
    const OFFENSE_CARDS = {
      run: {
        power: {
          name: 'Power Run',
          modifier: 2,
          minRoll: 5,
          icon: 'üí™'
        },
        sweep: {
          name: 'Sweep',
          modifier: 4,
          minRoll: 7,
          icon: '‚ö°'
        }
      },
      pass: {
        short: {
          name: 'Short Pass',
          modifier: 3,
          minRoll: 6,
          icon: 'üéØ'
        },
        deep: {
          name: 'Deep Pass',
          modifier: 6,
          minRoll: 9,
          icon: 'üöÄ'
        }
      }
    };

    // Defense card definitions
    const DEFENSE_CARDS = {
      contain: {
        name: 'Contain',
        modifier: 3,
        icon: 'üß±'
      },
      blitz: {
        name: 'Blitz',
        modifier: 5,
        icon: '‚öîÔ∏è'
      },
      coverage: {
        name: 'Coverage',
        modifier: 4,
        icon: 'üë•'
      },
      prevent: {
        name: 'Prevent',
        modifier: 2,
        icon: 'üö´'
      }
    };

    // Game constants
    const FIELD_LENGTH = 40;
    const WINNING_SCORE = 3;
    const YARDS_FOR_FIRST_DOWN = 10;

    // Current game state
    let state = {
      player1Score: 0,
      player2Score: 0,
      currentYardLine: 0,
      offensePlayer: 1,
      currentDown: 1,
      yardsToFirstDown: YARDS_FOR_FIRST_DOWN,
      firstDownLine: YARDS_FOR_FIRST_DOWN,
      gameOver: false,
      selectedPlayType: null,
      selectedOffenseCard: null,
      selectedDefenseCard: null
    };

    // ========================================
    // Utility Functions
    // ========================================

    /**
     * Roll two six-sided dice
     * @returns {Array} [die1, die2]
     */
    function rollDice() {
      const die1 = Math.floor(Math.random() * 6) + 1;
      const die2 = Math.floor(Math.random() * 6) + 1;
      return [die1, die2];
    }

    /**
     * Clamp a value between min and max
     */
    function clamp(value, min, max) {
      return Math.min(Math.max(value, min), max);
    }

    /**
     * Get ordinal string for down (1st, 2nd, 3rd, 4th)
     */
    function getDownString(down) {
      const suffixes = ['th', 'st', 'nd', 'rd'];
      const v = down % 100;
      return down + (suffixes[(v - 20) % 10] || suffixes[v] || suffixes[0]);
    }

    /**
     * Add entry to play log
     */
    function addLog(message, type = 'normal') {
      const logDiv = document.getElementById('playLog');
      const entry = document.createElement('div');
      entry.className = 'log-entry';
      
      if (type === 'touchdown') {
        entry.classList.add('touchdown');
      } else if (type === 'drive-end') {
        entry.classList.add('drive-end');
      } else if (type === 'first-down') {
        entry.classList.add('first-down');
      }
      
      entry.textContent = message;
      logDiv.insertBefore(entry, logDiv.firstChild);
    }

    /**
     * Update ball position on visual field
     */
    function updateBallPosition() {
      const ball = document.getElementById('ballMarker');
      const percentage = (state.currentYardLine / FIELD_LENGTH) * 100;
      ball.style.left = `${percentage}%`;
    }

    /**
     * Update first down marker position
     */
    function updateFirstDownMarker() {
      const marker = document.getElementById('firstDownMarker');
      const percentage = (state.firstDownLine / FIELD_LENGTH) * 100;
      marker.style.left = `${percentage}%`;
    }

    /**
     * Update situation board display
     */
    function updateSituationBoard() {
      document.getElementById('downDisplay').textContent = getDownString(state.currentDown);
      document.getElementById('yardsToFirst').textContent = state.yardsToFirstDown;
      document.getElementById('fieldPosition').textContent = state.currentYardLine;
      document.getElementById('yardsToTD').textContent = FIELD_LENGTH - state.currentYardLine;
      
      const defensePlayer = state.offensePlayer === 1 ? 2 : 1;
      document.getElementById('possessionInfo').textContent = 
        `Player ${state.offensePlayer} has possession`;
    }

    /**
     * Update UI to reflect current state
     */
    function updateUI() {
      document.getElementById('score1').textContent = state.player1Score;
      document.getElementById('score2').textContent = state.player2Score;
      
      const defensePlayer = state.offensePlayer === 1 ? 2 : 1;
      
      // Update section headers
      document.getElementById('offenseHeader').textContent = `üèà OFFENSE - Player ${state.offensePlayer}`;
      document.getElementById('defenseHeader').textContent = `üõ°Ô∏è DEFENSE - Player ${defensePlayer}`;
      
      updateBallPosition();
      updateFirstDownMarker();
      updateSituationBoard();
      updatePlayButton();
      updateCardStates();
    }

    /**
     * Update which cards are enabled/disabled
     */
    function updateCardStates() {
      if (state.gameOver) {
        document.querySelectorAll('.card').forEach(card => {
          card.classList.add('disabled');
        });
        return;
      }
      
      document.querySelectorAll('.card').forEach(card => {
        card.classList.remove('disabled');
      });
    }

    /**
     * Update play button text and state
     */
    function updatePlayButton() {
      const btn = document.getElementById('playBtn');
      
      if (state.gameOver) {
        btn.disabled = true;
        btn.textContent = 'Game Over';
        return;
      }
      
      if (state.selectedOffenseCard && state.selectedDefenseCard) {
        btn.disabled = false;
        btn.textContent = `‚ö° Execute Play!`;
      } else if (state.selectedOffenseCard) {
        btn.disabled = true;
        btn.textContent = 'Waiting for Defense...';
      } else if (state.selectedDefenseCard) {
        btn.disabled = true;
        btn.textContent = 'Waiting for Offense...';
      } else {
        btn.disabled = true;
        btn.textContent = 'Both Players Must Select Cards';
      }
    }

    /**
     * Select an offense card
     */
    function selectOffenseCard(playType, cardType) {
      if (state.gameOver) return;
      
      // Deselect all offense cards
      document.querySelectorAll('[id^="card-run-"], [id^="card-pass-"]').forEach(card => {
        card.classList.remove('selected');
      });
      
      // Select the chosen card
      state.selectedPlayType = playType;
      state.selectedOffenseCard = cardType;
      document.getElementById(`card-${playType}-${cardType}`).classList.add('selected');
      
      updatePlayButton();
    }

    /**
     * Select a defense card
     */
    function selectDefenseCard(cardType) {
      if (state.gameOver) return;
      
      // Deselect all defense cards
      document.querySelectorAll('[id^="card-def-"]').forEach(card => {
        card.classList.remove('selected');
      });
      
      // Select the chosen card
      state.selectedDefenseCard = cardType;
      document.getElementById(`card-def-${cardType}`).classList.add('selected');
      
      updatePlayButton();
    }

    /**
     * Clear all card selections
     */
    function clearSelections() {
      state.selectedPlayType = null;
      state.selectedOffenseCard = null;
      state.selectedDefenseCard = null;
      
      document.querySelectorAll('.card').forEach(card => {
        card.classList.remove('selected');
      });
    }

    /**
     * Reset downs and yards for new possession
     */
    function resetDowns() {
      state.currentDown = 1;
      state.yardsToFirstDown = YARDS_FOR_FIRST_DOWN;
      state.firstDownLine = Math.min(state.currentYardLine + YARDS_FOR_FIRST_DOWN, FIELD_LENGTH);
    }

    /**
     * Switch offense and defense roles (turnover)
     */
    function turnover() {
      state.offensePlayer = state.offensePlayer === 1 ? 2 : 1;
      state.currentYardLine = 0;
      clearSelections();
      resetDowns();
      
      addLog(`--- TURNOVER ON DOWNS: Player ${state.offensePlayer} now on offense ---`, 'drive-end');
    }

    /**
     * Score a touchdown
     */
    function scoreTouchdown() {
      if (state.offensePlayer === 1) {
        state.player1Score++;
      } else {
        state.player2Score++;
      }
      
      addLog(`üèÜ TOUCHDOWN! Player ${state.offensePlayer} scores! (Score: ${state.player1Score}-${state.player2Score})`, 'touchdown');
      
      // Check for winner
      if (state.player1Score >= WINNING_SCORE || state.player2Score >= WINNING_SCORE) {
        endGame();
      } else {
        // Switch possession after touchdown
        state.offensePlayer = state.offensePlayer === 1 ? 2 : 1;
        state.currentYardLine = 0;
        clearSelections();
        resetDowns();
        addLog(`--- Player ${state.offensePlayer} now on offense ---`, 'drive-end');
      }
    }

    /**
     * End the game and declare winner
     */
    function endGame() {
      state.gameOver = true;
      const winner = state.player1Score >= WINNING_SCORE ? 1 : 2;
      
      document.getElementById('winnerText').textContent = `Player ${winner} Wins!`;
      document.getElementById('gameOver').style.display = 'block';
      
      addLog(`üéâ GAME OVER: Player ${winner} wins ${state.player1Score}-${state.player2Score}!`, 'touchdown');
      updateUI();
    }

    // ========================================
    // Play Execution
    // ========================================

    /**
     * Execute the selected play
     */
    function executePlay() {
      if (state.gameOver || !state.selectedOffenseCard || !state.selectedDefenseCard) return;
      
      const offenseCard = OFFENSE_CARDS[state.selectedPlayType][state.selectedOffenseCard];
      const defenseCard = DEFENSE_CARDS[state.selectedDefenseCard];
      
      // Roll dice
      const [die1, die2] = rollDice();
      const diceTotal = die1 + die2;
      
      // Calculate yards: (dice total + offense modifier) - defense modifier
      const rawYards = diceTotal + offenseCard.modifier - defenseCard.modifier;
      const yards = clamp(rawYards, 0, FIELD_LENGTH);
      
      // Log the play
      addLog(`${getDownString(state.currentDown)} & ${state.yardsToFirstDown}: ${offenseCard.icon} ${offenseCard.name} vs ${defenseCard.icon} ${defenseCard.name}`);
      addLog(`Rolled ${die1}+${die2}=${diceTotal} | +${offenseCard.modifier} OFF | -${defenseCard.modifier} DEF | Net: ${rawYards} yards`);
      
      // Check if minimum roll was met
      if (diceTotal < offenseCard.minRoll) {
        addLog(`‚ö†Ô∏è Roll too low! Needed ${offenseCard.minRoll}+ but got ${diceTotal}. Play failed!`);
        
        // Advance down
        state.currentDown++;
        
        if (state.currentDown > 4) {
          turnover();
        } else {
          clearSelections();
        }
      } else if (rawYards <= 0) {
        addLog('Defense stuffed the play! No gain.');
        
        // Advance down
        state.currentDown++;
        
        if (state.currentDown > 4) {
          turnover();
        } else {
          clearSelections();
        }
      } else {
        // Successful play - advance the ball
        state.currentYardLine = Math.min(state.currentYardLine + yards, FIELD_LENGTH);
        state.yardsToFirstDown -= yards;
        
        addLog(`‚úÖ Gained ${yards} yards! Now at ${state.currentYardLine} yard line.`);
        
        // Check for touchdown
        if (state.currentYardLine >= FIELD_LENGTH) {
          scoreTouchdown();
        } 
        // Check for first down
        else if (state.yardsToFirstDown <= 0) {
          addLog(`üéØ FIRST DOWN! Chains reset.`, 'first-down');
          resetDowns();
          clearSelections();
        } 
        // Just advance the down
        else {
          state.currentDown++;
          
          if (state.currentDown > 4) {
            turnover();
          } else {
            clearSelections();
          }
        }
      }
      
      updateUI();
    }

    /**
     * Reset the game to initial state
     */
    function resetGame() {
      state = {
        player1Score: 0,
        player2Score: 0,
        currentYardLine: 0,
        offensePlayer: 1,
        currentDown: 1,
        yardsToFirstDown: YARDS_FOR_FIRST_DOWN,
        firstDownLine: YARDS_FOR_FIRST_DOWN,
        gameOver: false,
        selectedPlayType: null,
        selectedOffenseCard: null,
        selectedDefenseCard: null
      };
      
      clearSelections();
      
      document.getElementById('playLog').innerHTML = '';
      document.getElementById('gameOver').style.display = 'none';
      
      addLog('üéÆ New game started! Player 1 starts on offense.');
      updateUI();
    }

    // ========================================
    // Initialize Game
    // ========================================
    
    // Start the game on page load
    window.onload = function() {
      addLog('üéÆ Game ready! Player 1 is offense, Player 2 is defense.');
      addLog('üèà 4 downs to get 10 yards. Field is 40 yards. First to 3 TDs wins!');
      addLog('üí° Both players choose cards, then execute the play!');
      updateUI();
    };
  </script>
</body>
</html>